// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        Int       @id @default(autoincrement())
  name      String
  email     String    @unique
  password  String
  is_admin  Boolean
  token     String?
  expiresIn DateTime?
  used      Boolean?
}

model Category {
  id   Int    @id @default(autoincrement())
  name String

  products Product[]
}

model Unit_Measure {
  id           Int    @id @default(autoincrement())
  unit_measure String

  products Product[]
}

model Product {
  id               Int     @id @default(autoincrement())
  name             String
  location         String
  quantity         Int
  purchase_allowed Boolean
  origin_city_hall Boolean

  category        Category     @relation(fields: [id_category], references: [id])
  id_category     Int
  unit_measure    Unit_Measure @relation(fields: [id_unit_measure], references: [id])
  id_unit_measure Int

  products Order_item[]
}

model Order {
  id Int @id @default(autoincrement())

  order_items Order_item[]
}

model Order_item {
  id                Int      @id @default(autoincrement())
  status            String
  expected_date     DateTime
  quantity_in_stock Int
  new_quantity      Int

  order      Order   @relation(fields: [id_order], references: [id])
  id_order   Int     // relation scalar field (used in the `@relation` attribute above)
  product    Product @relation(fields: [id_product], references: [id])
  id_product Int     // relation scalar field (used in the `@relation` attribute above)
}


model Budget {
  id               Int    @id @default(autoincrement())
  name             String
  responsible_name String
  rg               String
  cpf              String

  budget_companies Budget_company?
  budget_product   Budget_product?
}

model Budget_company {
  id             Int    @id @default(autoincrement())
  corporate_name String
  cnpj           String
  phone          String

  budget_products Budget_product?

  budget    Budget @relation(fields: [id_budget], references: [id])
  id_budget Int    @unique
}

model Budget_product {
  id          Int    @id @default(autoincrement())
  description String
  valueA      Int
  valueB      Int
  valueC      Int
  quantity    Int

  Budget_company    Budget_company @relation(fields: [id_budget_company], references: [id])
  id_budget_company Int            @unique
  Budget            Budget         @relation(fields: [id_budget], references: [id])
  id_budget         Int            @unique
}
